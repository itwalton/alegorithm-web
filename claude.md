# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Alegorithm is a next-generation brewing assistant web application that helps brewers:
- Manage inventory (fermentables, hops, chemicals)
- Create and share recipes
- Track brew days
- Monitor analytics of recipes over time

## Commands

### Development
```bash
pnpm dev              # Start development server with hot reload
pnpm build            # Type check and build for production
pnpm preview          # Preview production build locally
```

### Code Quality
```bash
pnpm lint             # Run ESLint on the codebase
pnpm format           # Format code with Prettier
pnpm format:check     # Check code formatting without modifying
```

## Architecture

### Tech Stack
- **Framework**: React 19 with TypeScript
- **Bundler**: Vite (using rolldown-vite variant)
- **Routing**: TanStack Router v1 with file-based routing
- **UI Library**: Material-UI v7 (MUI) with Emotion styling
- **Icons**: react-icons
- **Charts**: Recharts
- **Package Manager**: pnpm

### Routing Structure

The application uses TanStack Router with file-based routing. Routes are defined in `src/routes/`:
- Route files in `src/routes/` automatically generate the routing tree
- The `src/routeTree.gen.ts` file is auto-generated by the TanStack Router plugin
- Root route (`__root.tsx`) wraps all routes with AppLayout and ThemeProvider
- Main routes: `/` (overview), `/inventory`, `/recipes`, `/brew-days`

### Application Layout

The app uses a persistent layout pattern:
- `AppLayout` component (`src/components/shared/AppLayout.tsx`) provides the navigation structure
- Responsive drawer navigation (240px wide on desktop, collapsible on mobile)
- Top app bar with logo and action buttons (settings, logout)
- Main content area with Outlet for route rendering

### Theme & Styling

Custom dark theme with neon accents (`src/theme/theme.ts`):
- **Dark mode**: Near-black background (#050505)
- **Primary**: Neon green (#00ff41)
- **Secondary**: Neon yellow (#ffff00)
- **Typography**: Gothic A1 font family
- **Styling approach**: Material-UI sx prop and theme overrides (avoid adding new CSS files unless necessary)

### Data Patterns

The app currently uses mock data with a consistent pattern:
- Custom hooks prefixed with `useGet*` (e.g., `useGetFermentablesInventory`)
- Return type: `{ data: T[], isLoading: boolean, error: Error | null }`
- Models defined in `*.model.ts` files
- Base interface `LineItem` in `src/components/inventory-page/inventory.type.ts`

### Component Organization

Components are organized by feature:
```
src/components/
├── shared/              # Shared layout and reusable components
├── overview/            # Overview/dashboard page
├── inventory-page/      # Inventory feature
│   ├── fermentables-inventory/
│   ├── hops-inventory/
│   ├── chemicals-inventory/
│   └── Inventory.page.tsx  # Category tabs and routing
├── recipes/             # Recipe management
└── brew-days/           # Brew day tracking
```

Each inventory category typically includes:
- Page component (`*.page.tsx`)
- Table component (`*Table.tsx`)
- Data model (`*.model.ts`)
- Custom hook (`useGet*.ts`)
- Charts subdirectory with visualization components

### Inventory System

The inventory system is organized into three categories:
1. **Fermentables**: Malts, extracts, sugars, adjuncts
2. **Hops**: Aroma and bittering hops
3. **Chemicals**: Water treatment chemicals

Each category has:
- Its own table component with Material-UI tables
- Date-based color coding for freshness warnings (>6 months = yellow, >12 months = red)
- Charts for visualization
- Common `LineItem` interface with `id` and `datePurchased`

## Development Guidelines

- Avoid adding new packages unless explicitly requested
- Use Material-UI components and sx prop for styling
- Follow the established data fetching pattern with custom hooks
- Component files use `.tsx` extension for React components
- Type definitions go in `*.model.ts` or `*.type.ts` files
- Keep page components in `*.page.tsx` files
- Use TypeScript strict mode (configured in tsconfig.app.json)
